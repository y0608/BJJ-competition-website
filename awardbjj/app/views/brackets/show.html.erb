<main class="m-20 justify-center">
	<%= link_to sanitize("&larr; Back to all brackets"), event_brackets_path(@event), class: "text-blue-500 hover:underline mb-4 inline-block" %>

	<h1 class="text-3xl font-semibold">
		<%= render "weightclasses/weightclass", weightclass: @bracket.weightclass %>
	</h1>

	<% matches_by_round = @bracket.matches.sort.group_by(&:round).sort.reverse.to_h %>
	<section class="my-10 grid grid-cols-1 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-<%= matches_by_round.keys.count %> gap-4">
		<% if matches_by_round.keys.count != 0 %>
      <% matches_by_round.each do |round, matches| %>
        <div class="col-span-1 text-center">
        <h2 class="text-lg font-semibold"><%= Match::ROUND_LABELS[round] %></h2>
          <div class="h-full flex flex-col justify-center items-center">
            <%= render matches, event:@bracket.event%>
          </div>
        </div>
      <% end %>
    <% else %>
      <p>No matches, yet</p>
    <% end %>
	</section>

	<section>
		<%= render "brackets/winners", bracket: @bracket %>
	</section>
</main>